# socket

## 网络编程中遇到的主要问题

如何准确的定位网络上的一台或者多台主机，在之后如何有效可靠的进行数据传输。

对于tcp/ip协议来说，可以理解ip主要负责定位，而tcp主要负责传输，tcp提供两种传输机制，tcp和udp。

## 2. android中的socket

android中的socket是基于tcp/ip协议的，socket与tcp/ip没有必然的联系，socket也可以基于其他的协议，

现在流行的网络编程模式是c/s模式，即客户端/服务器模式，

## 对于tcp来说

客户端和服务端，需要建立socket连接，服务端会对端口进行监控，当监控到有客户端发送建立连接的请求的是，就会开启一个进程去处理请求，并继续监控端口，

每当服务端收到一个客户端的请求，就会创建一个socket，

socket构造方法中address、host和port分别是双向连接中另一方的IP地址、主机名和端 口号，stream指明socket是流socket还是数据报socket，localPort表示本地主机的端口号，localAddr和 bindAddr是本地机器的地址（ServerSocket的主机地址），impl是socket的父类，既可以用来创建serverSocket又可 以用来创建Socket。count则表示服务端所能支持的最大连接数。

对于ui的修改需要使用handler放在主线程中，

### 通信过程

1. 建立socket对象
1. 获取socket输入/输出流
1. 使用socket对象操作进行输入输出操作
1. 关闭socket

## 对于udp来说

### udp通信过程

1. 建立一个DatagramSocket对象
1. 创建用于接收和发送数据的DatagramPacket对象
1. 利用DatagramSocket类方法seceive()或send()接收发送数据包。

## 基于tcp的socket与基于udp的socket比较

UDP：

1. 每个数据报中都给出了完整的地址信息，因此无需要建立发送方和接收方的连接。
1. UDP传输数据时是有大小限制的，每个被传输的数据报必须限定在64KB之内。
1. UDP是一个不可靠的协议，发送方所发送的数据报并不一定以相同的次序到达接收方

TCP：

1. 面向连接的协议，在socket之间进行数据传输之前必然要建立连接，所以在TCP中需要连接时间。
1. TCP传输数据大小限制，一旦连接建立起来，双方的socket就可以按统一的格式传输大的数据。
1. TCP是一个可靠的协议，它确保接收方完全正确地获取发送方所发送的全部数据。

应用：

1. TCP在网络通信上有极强的生命力，例如远程连接（Telnet）和文件传输（FTP）都需要不定长度的数据被可靠地传输。但是可靠的传输是要付出代价的，对数据内容正确性的检验必然占用计算机的处理时间和网络的带宽，因此TCP传输的效率不如UDP高。

1. UDP操作简单，而且仅需要较少的监护，因此通常用于局域网高可靠性的分散系统中client/server应用程序。例如视频会议系统，并不要求音频视频数据绝对的正确，只要保证连贯性就可以了，这种情况下显然使用UDP会更合理一些。
